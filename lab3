Step 1: Set Up the Environment
Ensure you have the necessary tools installed:
● Google Cloud SDK (gcloud)
● Python (for this example)
● Cloud Functions and Cloud Storage enabled in your GCP project

gsutil mb -l us-central1 gs://your-bucket-name
mkdir gcs-function

cd gcs-function
Create a Python file (main.py) and write the function:
import functions_framework
@functions_framework.cloud_event
def gcs_trigger(cloud_event):
data = cloud_event.data
file_name = data["name"]
bucket_name = data["bucket"]
size = data.get("size", "Unknown size")
print(f"File {file_name} uploaded to
{bucket_name}, size: {size} bytes")


echo "functions-framework==3.*" >
requirements.txt


gcloud functions deploy gcs_trigger \
--gen2 \
--runtime=python311 \
--region=us-central1 \
--source=. \
--entry-point=gcs_trigger \

--trigger-event-filters="type=google.cloud.st
orage.object.v1.finalized" \

--trigger-event-filters="bucket=your-bucket-name
" \ --allow-unauthenticated
